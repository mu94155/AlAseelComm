<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ù„Ø£ØµÙŠÙ„ - Ø¥Ø¯Ø§Ø±Ø© Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles/home.css">
    <link rel="stylesheet" href="styles/bootstrap-rtl-custom.css">
    <style>
        .expense-card {
            border-left: 4px solid #007bff;
            transition: all 0.3s ease;
        }
        .expense-card:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        .milestone-badge {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.875rem;
            font-weight: bold;
        }
        .payment-status {
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        .status-paid {
            background-color: #d4edda;
            color: #155724;
        }
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        .status-overdue {
            background-color: #f8d7da;
            color: #721c24;
        }
        .expense-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .progress-custom {
            height: 8px;
            border-radius: 4px;
        }
        .form-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .search-filters {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-group-vertical .btn {
            margin-bottom: 0.5rem;
        }
        .alert-floating {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            max-width: 400px;
        }
        .expenses-stats {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-card {
            text-align: center;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        .stat-card h3 {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .stat-card.primary {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
        }
        .stat-card.success {
            background: linear-gradient(45deg, #28a745, #1e7e34);
            color: white;
        }
        .stat-card.warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
            color: #212529;
        }
        .stat-card.info {
            background: linear-gradient(45deg, #17a2b8, #117a8b);
            color: white;
        }
        #cancelEditExpense, #cancelEditMilestone {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© (Header) -->
    <header class="bg-primary text-white">
        <div class="container">
            <div class="header-content text-center py-4">
                <h1 class="display-5 mb-3">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h1>
                <p class="lead">Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù…ØµØ§Ø±ÙŠÙ Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø£ØµÙŠÙ„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ ÙˆÙ…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</p>
            </div>
        </div>
    </header>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ (Navigation) -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-secondary">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="Aseel-home-01.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                    <li class="nav-item"><a class="nav-link active" href="#expenses">Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</a></li>
                    <li class="nav-item"><a class="nav-link" href="#milestones">Ø§Ù„Ù…Ø±Ø§Ø­Ù„</a></li>
                    <li class="nav-item"><a class="nav-link" href="#reports">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a></li>
                    <li class="nav-item"><a class="nav-link" href="budget-settings.html">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="container my-5">
        <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ -->
        <div class="expense-summary text-center">
            <div class="row">
                <div class="col-md-3">
                    <h3 class="h4">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</h3>
                    <p class="h2 mb-0" id="totalBudget">2,500,000 Ø±.Ø¹</p>
                </div>
                <div class="col-md-3">
                    <h3 class="h4">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ù†ÙÙ‚</h3>
                    <p class="h2 mb-0" id="totalExpended">0 Ø±.Ø¹</p>
                </div>
                <div class="col-md-3">
                    <h3 class="h4">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</h3>
                    <p class="h2 mb-0" id="totalRemaining">2,500,000 Ø±.Ø¹</p>
                </div>
                <div class="col-md-3">
                    <h3 class="h4">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</h3>
                    <p class="h2 mb-0" id="completionPercentage">0%</p>
                    <small class="text-white-50">ØªØ­Ø¯Ø¯ Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ù„Ù„Ø¯ÙØ¹</small>
                </div>
            </div>
            <div class="progress progress-custom mt-3">
                <div class="progress-bar bg-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" title="Ù†Ø³Ø¨Ø© Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"></div>
            </div>
            <div class="mt-2 text-white-50 small">
                <i class="bi bi-info-circle me-1"></i>
                Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…Ø±Ø§Ø­Ù„ Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            </div>
        </div>

        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
        <div class="expenses-stats">
            <h2 class="h4 mb-4 text-center">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
            <div class="row">
                <div class="col-md-3">
                    <div class="stat-card primary">
                        <h3 id="totalExpensesCount">0</h3>
                        <p class="mb-0">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card success">
                        <h3 id="completedMilestonesCount">0</h3>
                        <p class="mb-0">Ù…Ø±Ø§Ø­Ù„ Ù…ÙƒØªÙ…Ù„Ø©</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card warning">
                        <h3 id="pendingMilestonesCount">0</h3>
                        <p class="mb-0">Ù…Ø±Ø§Ø­Ù„ Ù…Ø¹Ù„Ù‚Ø©</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card info">
                        <h3 id="monthlyExpensesTotal">0</h3>
                        <p class="mb-0">Ù…ØµØ§Ø±ÙŠÙ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ -->
        <section id="expenses-management" class="mb-5">
            <h2 class="h3 mb-4 text-center">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©</h2>
            
            <!-- Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© -->
            <div class="search-filters">
                <div class="row">
                    <div class="col-md-6">
                        <label for="searchExpenses" class="form-label">Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</label>
                        <input type="text" class="form-control" id="searchExpenses" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„ÙˆØµÙ Ø£Ùˆ Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ùˆ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª...">
                    </div>
                    <div class="col-md-4">
                        <label for="filterCategory" class="form-label">ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</label>
                        <select class="form-select" id="filterCategory">
                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
                            <option value="construction">Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡</option>
                            <option value="materials">Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡</option>
                            <option value="salaries">Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ø£Ø¬ÙˆØ±</option>
                            <option value="utilities">Ø§Ù„Ù…Ø±Ø§ÙÙ‚ ÙˆØ§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
                            <option value="maintenance">Ø§Ù„ØµÙŠØ§Ù†Ø©</option>
                            <option value="equipment">Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„Ø¢Ù„Ø§Øª</option>
                            <option value="other">Ø£Ø®Ø±Ù‰</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">&nbsp;</label>
                        <button type="button" class="btn btn-outline-secondary w-100" onclick="location.reload()">
                            <i class="bi bi-arrow-clockwise"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
                        </button>
                    </div>
                </div>
            </div>

            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ -->
            <div class="table-container">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th>ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ</th>
                                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                <th>Ø§Ù„ÙØ¦Ø©</th>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="expensesTableBody">
                            <tr>
                                <td colspan="7" class="text-center text-muted py-4">
                                    <i class="bi bi-hourglass-split fs-1 d-block mb-2"></i>
                                    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Ù†Ù…Ø§Ø°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ -->
        <section id="forms-section" class="mb-5">
            <div class="row">
                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ØµØ±ÙˆÙ -->
                <div class="col-lg-6 mb-4">
                    <div class="card border-primary">
                        <div class="card-header bg-primary text-white">
                            <h3 class="h5 mb-0">â• Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯</h3>
                        </div>
                        <div class="card-body">
                            <form id="expenseForm">
                                <div class="mb-3">
                                    <label for="expenseDescription" class="form-label">ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ *</label>
                                    <input type="text" class="form-control" id="expenseDescription" name="expenseDescription" placeholder="Ù…Ø«Ù„: Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ØŒ Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø¹Ù…Ø§Ù„ØŒ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="expenseAmount" class="form-label">Ø§Ù„Ù…Ø¨Ù„Øº (Ø±.Ø¹) *</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="expenseAmount" name="expenseAmount" placeholder="0.00" min="0" step="0.01" required>
                                        <span class="input-group-text">Ø±.Ø¹</span>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="expenseCategory" class="form-label">ÙØ¦Ø© Ø§Ù„Ù…ØµØ±ÙˆÙ *</label>
                                    <select class="form-select" id="expenseCategory" name="expenseCategory" required>
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                                        <option value="construction">Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡</option>
                                        <option value="materials">Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡</option>
                                        <option value="salaries">Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ø£Ø¬ÙˆØ±</option>
                                        <option value="utilities">Ø§Ù„Ù…Ø±Ø§ÙÙ‚ ÙˆØ§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
                                        <option value="maintenance">Ø§Ù„ØµÙŠØ§Ù†Ø©</option>
                                        <option value="equipment">Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„Ø¢Ù„Ø§Øª</option>
                                        <option value="other">Ø£Ø®Ø±Ù‰</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="expenseDate" class="form-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØµØ±ÙˆÙ *</label>
                                    <input type="date" class="form-control" id="expenseDate" name="expenseDate" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="expenseNotes" class="form-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                                    <textarea class="form-control" id="expenseNotes" name="expenseNotes" rows="3" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©..."></textarea>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-primary" id="expenseSubmitBtn">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…ØµØ±ÙˆÙ</button>
                                    <button type="button" class="btn btn-outline-secondary" id="cancelEditExpense">âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø±Ø­Ù„Ø© -->
                <div class="col-lg-6 mb-4">
                    <div class="card border-info">
                        <div class="card-header bg-info text-white">
                            <h3 class="h5 mb-0">ğŸ“… Ø¬Ø¯ÙˆÙ„Ø© Ø¯ÙØ¹Ø© Ù…Ø±Ø­Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                        </div>
                        <div class="card-body">
                            <form id="milestoneForm">
                                <div class="mb-3">
                                    <label for="milestoneTitle" class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø±Ø­Ù„Ø© *</label>
                                    <input type="text" class="form-control" id="milestoneTitle" name="milestoneTitle" placeholder="Ù…Ø«Ù„: Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© - Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØªØ´Ø·ÙŠØ¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneAmount" class="form-label">Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø© (Ø±.Ø¹) *</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="milestoneAmount" name="milestoneAmount" placeholder="0.00" min="0" step="0.01" required>
                                        <span class="input-group-text">Ø±.Ø¹</span>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneCompletionPercentage" class="form-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ø¯ÙØ¹ *</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="milestoneCompletionPercentage" name="milestoneCompletionPercentage" placeholder="30" min="1" max="100" step="1" required>
                                        <span class="input-group-text">%</span>
                                    </div>
                                    <small class="text-muted">Ø³ÙŠØªÙ… Ø¯ÙØ¹ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø¨Ø© Ù…Ù† Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</small>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneStatus" class="form-label">Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø© *</label>
                                    <select class="form-select" id="milestoneStatus" name="milestoneStatus" required>
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©</option>
                                        <option value="scheduled">Ù…Ø¬Ø¯ÙˆÙ„Ø©</option>
                                        <option value="in-progress">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
                                        <option value="completed">Ù…ÙƒØªÙ…Ù„Ø©</option>
                                        <option value="pending">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneContractor" class="form-label">Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„/Ø§Ù„Ù…ÙˆØ±Ø¯</label>
                                    <input type="text" class="form-control" id="milestoneContractor" name="milestoneContractor" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© Ø£Ùˆ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneDescription" class="form-label">ÙˆØµÙ Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…Ø±Ø­Ù„Ø© *</label>
                                    <textarea class="form-control" id="milestoneDescription" name="milestoneDescription" rows="3" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¥Ù†Ø¬Ø§Ø²Ù‡Ø§ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©..." required></textarea>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-info" id="milestoneSubmitBtn">ğŸ“‹ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø©</button>
                                    <button type="button" class="btn btn-outline-secondary" id="cancelEditMilestone">âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙˆØ§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„ÙŠØ© -->
        <section id="milestones" class="mb-5">
            <h2 class="h3 mb-4 text-center">Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„ÙŠØ©</h2>
            <div id="milestonesContainer">
                <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ù‡Ù†Ø§ Ø¹Ø¨Ø± JavaScript -->
            </div>
        </section>

        <!-- Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
        <section class="text-center mb-5">
            <h2 class="h3 mb-4">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h2>
            <div class="row">
                <div class="col-md-2 mb-3">
                    <button class="btn btn-primary btn-lg w-100" onclick="document.getElementById('expenseForm').scrollIntoView({ behavior: 'smooth' })">
                        <i class="bi bi-plus-circle"></i><br>
                        Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ
                    </button>
                </div>
                <div class="col-md-2 mb-3">
                    <button class="btn btn-info btn-lg w-100" onclick="document.getElementById('milestoneForm').scrollIntoView({ behavior: 'smooth' })">
                        <i class="bi bi-calendar-check"></i><br>
                        Ø¬Ø¯ÙˆÙ„Ø© Ø¯ÙØ¹Ø©
                    </button>
                </div>
                <div class="col-md-2 mb-3">
                    <button class="btn btn-success btn-lg w-100" onclick="expensesManager.exportData('csv')">
                        <i class="bi bi-file-earmark-text"></i><br>
                        ØªØµØ¯ÙŠØ± CSV
                    </button>
                </div>
                <div class="col-md-2 mb-3">
                    <button class="btn btn-warning btn-lg w-100" onclick="expensesManager.exportData('excel')">
                        <i class="bi bi-file-earmark-excel"></i><br>
                        ØªØµØ¯ÙŠØ± Excel
                    </button>
                </div>
                <div class="col-md-2 mb-3">
                    <a href="budget-settings.html" class="btn btn-secondary btn-lg w-100">
                        <i class="bi bi-gear"></i><br>
                        Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©
                    </a>
                </div>
                <div class="col-md-2 mb-3">
                    <button class="btn btn-outline-danger btn-lg w-100" onclick="clearAllData()">
                        <i class="bi bi-trash"></i><br>
                        Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© -->
    <footer class="bg-dark text-white mt-5">
        <div class="container py-4">
            <div class="text-center">
                <p class="mb-2">&copy; 2025 Ù…Ø¬Ù…Ø¹ Ø£Ù„Ø£ØµÙŠÙ„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</p>
                <p class="small text-muted">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: 22 ÙŠÙˆÙ„ÙŠÙˆ 2025 | Ø§Ù„Ù†Ø³Ø®Ø© 2.0 - Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù…ØµØ§Ø±ÙŠÙ</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SheetJS for Excel export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="JS/expensesManager.js"></script>
    
    <script>
        // Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ© Ø®Ø§ØµØ© Ø¨Ø§Ù„ØµÙØ­Ø©
        
        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ\n\nØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù:\n- Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©\n- Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…Ø¶Ø§ÙØ©\n- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©\n\nÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!')) {
                if (confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ 100% Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                    localStorage.removeItem('alaseel_expenses');
                    localStorage.removeItem('alaseel_milestones');
                    localStorage.removeItem('alaseel_budget_settings');
                    location.reload();
                }
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ
            setTimeout(updateQuickStats, 500);
        });

        function updateQuickStats() {
            if (typeof expensesManager !== 'undefined') {
                // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ
                document.getElementById('totalExpensesCount').textContent = expensesManager.expenses.length;
                
                // Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©
                const completedMilestones = expensesManager.milestones.filter(m => m.status === 'completed').length;
                document.getElementById('completedMilestonesCount').textContent = completedMilestones;
                
                // Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©
                const pendingMilestones = expensesManager.milestones.filter(m => m.status === 'pending' || m.status === 'in-progress').length;
                document.getElementById('pendingMilestonesCount').textContent = pendingMilestones;
                
                // Ù…ØµØ§Ø±ÙŠÙ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±
                const currentMonth = new Date().getMonth();
                const currentYear = new Date().getFullYear();
                const monthlyExpenses = expensesManager.expenses.filter(exp => {
                    const expDate = new Date(exp.date);
                    return expDate.getMonth() === currentMonth && expDate.getFullYear() === currentYear;
                }).reduce((sum, exp) => sum + exp.amount, 0);
                
                document.getElementById('monthlyExpensesTotal').textContent = monthlyExpenses.toLocaleString();
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        const originalLoadExpenses = expensesManager?.loadExpenses;
        const originalLoadMilestones = expensesManager?.loadMilestones;

        // ØªØ·Ø¨ÙŠÙ‚ ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©
        document.addEventListener('DOMContentLoaded', function() {
            // ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ±ÙˆØª
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-3px)';
                    this.style.boxShadow = '0 6px 12px rgba(0,0,0,0.15)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '';
                });
            });

            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ ÙƒÙ‚ÙŠÙ…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('expenseDate').value = today;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® ÙƒÙ„ ÙŠÙˆÙ…
            setInterval(() => {
                const newToday = new Date().toISOString().split('T')[0];
                if (document.getElementById('expenseDate').value === today) {
                    document.getElementById('expenseDate').value = newToday;
                }
            }, 86400000); // ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©
        });

        // Ø¯Ø§Ù„Ø© Ù„Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø³Ù„Ø³ Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ù…Ø¹ÙŠÙ†
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        document.addEventListener('keydown', function(e) {
            // Ctrl + N: Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                document.getElementById('expenseDescription').focus();
            }
            
            // Ctrl + M: Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
            if (e.ctrlKey && e.key === 'm') {
                e.preventDefault();
                document.getElementById('milestoneTitle').focus();
            }
            
            // Ctrl + S: Ø­ÙØ¸ (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…ÙØªÙˆØ­)
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                const activeElement = document.activeElement;
                if (activeElement.closest('#expenseForm')) {
                    document.getElementById('expenseForm').dispatchEvent(new Event('submit'));
                } else if (activeElement.closest('#milestoneForm')) {
                    document.getElementById('milestoneForm').dispatchEvent(new Event('submit'));
                }
            }
        });

        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
        function printReport() {
            const printWindow = window.open('', '_blank');
            const currentData = {
                expenses: expensesManager.expenses,
                milestones: expensesManager.milestones,
                summary: {
                    totalBudget: expensesManager.budgetSettings.totalBudget,
                    totalExpended: expensesManager.calculateTotalExpended(),
                    totalRemaining: expensesManager.budgetSettings.totalBudget - expensesManager.calculateTotalExpended()
                }
            };
            
            printWindow.document.write(`
                <html dir="rtl">
                <head>
                    <title>ØªÙ‚Ø±ÙŠØ± Ù…ØµØ§Ø±ÙŠÙ Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø£ØµÙŠÙ„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 2cm; }
                        h1, h2 { color: #007bff; text-align: center; }
                        table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }
                        th { background-color: #f8f9fa; }
                        .summary { background: #e9ecef; padding: 1rem; margin-bottom: 2rem; }
                    </style>
                </head>
                <body>
                    <h1>ØªÙ‚Ø±ÙŠØ± Ù…ØµØ§Ø±ÙŠÙ Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø£ØµÙŠÙ„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</h1>
                    <p style="text-align: center;">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-EG')}</p>
                    
                    <div class="summary">
                        <h2>Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h2>
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©: ${currentData.summary.totalBudget.toLocaleString()} Ø±.Ø¹</p>
                        <p>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ù†ÙÙ‚: ${currentData.summary.totalExpended.toLocaleString()} Ø±.Ø¹</p>
                        <p>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${currentData.summary.totalRemaining.toLocaleString()} Ø±.Ø¹</p>
                    </div>
                    
                    <h2>Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©</h2>
                    <table>
                        <thead>
                            <tr><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ÙØ¦Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr>
                        </thead>
                        <tbody>
                            ${currentData.expenses.map(exp => `
                                <tr>
                                    <td>${exp.description}</td>
                                    <td>${exp.amount.toLocaleString()} Ø±.Ø¹</td>
                                    <td>${expensesManager.getCategoryName(exp.category)}</td>
                                    <td>${new Date(exp.date).toLocaleDateString('ar-EG')}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    
                    <h2>Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙˆØ§Ù„Ø¯ÙØ¹Ø§Øª</h2>
                    <table>
                        <thead>
                            <tr><th>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</th></tr>
                        </thead>
                        <tbody>
                            ${currentData.milestones.map(milestone => `
                                <tr>
                                    <td>${milestone.title}</td>
                                    <td>${milestone.amount.toLocaleString()} Ø±.Ø¹</td>
                                    <td>${expensesManager.getStatusName(milestone.status)}</td>
                                    <td>${new Date(milestone.dueDate).toLocaleDateString('ar-EG')}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }
    </script>

    <!-- Admin Authentication -->
    <script src="JS/adminAuth.js"></script>
</body>
</html>
